Пробовал разные варианты для хранения указателя: в контрольном блоке или на указателях weak и shared.
В пользу первого - логика: зачем хранить указатель в куче разные мест, если можно хранить в одном контрольном блоке, а удалять данные (т.е. delete'ить и занулять указатель) при удалении всех shared. Но тогда в деструкторе shared нужно:
а) не трогать CB, пока weak им пользуются (но в таком случае происходит вылет по памяти на тестах -- видимо, потому что много CB висят до окончания программного блока). [ При этом, в деструкторе память из-под указателя освобождается. ]
б) удалять CB c данными, но тогда weak не знают, что CB удалён и не могут это проверить по nullptr для T* ptr, т.к. к нему не обратиться.

Либо нужно хранить в каждом weak и shared указатель на CB, а 